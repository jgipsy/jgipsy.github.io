{"head":{"title":"Apache Tunning for Liferay","date":"2017-05-18T00:00:00.000Z","layout":"Post","hero":"../../assets/hands.svg","description":"vim /etc/sysconfig/httpd First change default prefork MPM for mutli-thread & multi-process worker MPM: vim /etc/httpd/conf/httpd.confâ€¦"},"body":"<h1 id=\"vim-etcsysconfighttpd\"><a href=\"#vim-etcsysconfighttpd\" class=\"phenomic-HeadingAnchor\">#</a>vim /etc/sysconfig/httpd</h1>\n<p>First change default prefork MPM for mutli-thread &#x26; multi-process worker MPM:</p>\n<pre><code>Uncomment HTTPD=/usr/sbin/httpd.worker\n</code></pre>\n<h1 id=\"vim-etchttpdconfhttpdconf\"><a href=\"#vim-etchttpdconfhttpdconf\" class=\"phenomic-HeadingAnchor\">#</a>vim /etc/httpd/conf/httpd.conf</h1>\n<p>Configure MPM worker:</p>\n<pre><code>&#x3C;IfModule worker.c>\nServerLimit             250\nStartServers             10\nMaxClients              800\nMinSpareThreads          75\nMaxSpareThreads         250\nThreadLimit              64\nThreadsPerChild          32\nMaxRequestsPerChild   10000\n&#x3C;/IfModule>\n</code></pre>\n<p>Configure mod_disk_cache for serve liferay document_library. With two minutes cache is sufficient to increase liferay performance.</p>\n<pre><code>   &#x3C;IfModule mod_disk_cache.c>\n    CacheDirLevels 10\n    CacheDirLength 2\n    CacheEnable disk /documents/20182/\n    CacheRoot \"/tmp/cache\"\n    CacheIgnoreCacheControl On\n    CacheStorePrivate On\n    CacheStoreNoStore On\n    CacheMaxFileSize 10000000\n    CacheIgnoreNoLastMod On\n    CacheIgnoreURLSessionIdentifiers On\n    CacheMaxExpire 120\n    CacheDefaultExpire 120\n   &#x3C;/IfModule>\n</code></pre>\n<p>Unmount apj13 path for publish liferay theme images.</p>\n<pre><code>    JkUnMount /liferay-theme/images/* worker1\n</code></pre>\n<p>Create alias in httpd.conf for liferay-theme/images</p>\n<pre><code>Alias /bonpreu-theme/ \"/var/www/bonpreu-theme/\"\n\n&#x3C;Directory \"/var/www/bonpreu-theme/\">\n    Options Indexes MultiViews FollowSymLinks\n    AllowOverride None\n    Order allow,deny\n    Allow from all\n&#x3C;/Directory>\n</code></pre>\n<p>Copy bundle deployed liferay theme images into /var/www/bonpreu-theme</p>\n<pre><code>cp -r /opt/liferay/liferay-portal-6.2-ee-sp11/tomcat-7.0.42/webapps/bonpreu-theme/* /var/www/bonpreu-theme\n</code></pre>\n<p>Restart apache</p>\n<pre><code>/etc/init.d/httpd restart\n</code></pre>\n<p>With this configuration, your Liferay instance now can solve \"The C10K problem\"!!</p>\n","__filename":"posts/apache-tunning.md","__url":"/posts/apache-tunning/","__resourceUrl":"/posts/apache-tunning/index.html","__dataUrl":"/posts/apache-tunning/index.html.7e4f9059eaef2137da7b8db16d7ba444.json"}